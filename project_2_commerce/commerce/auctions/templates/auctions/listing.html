{% extends "auctions/layout.html" %}

{% load static %}

{% block title %}Listing: {{ listing.title }}{% endblock %}

{% block body %}
<div>
	<h2>Listing: {{ listing.title }}</h2>
	<div>
		<form action="{% url 'edit-watchlist' listing.id %}" method="post">
			{% csrf_token %}
			{% if watchlist_check %}
				<button type="submit" class="badge text-bg-dark">Remove</button>
			{% else %}
				<button type="submit" class="badge text-bg-secondary">Watchlist</button>
			{% endif %}
		</form>
	</div>
	<div class="mt-3">
		<img class="listing-img" src="{{ listing.image_url }}">
	</div>
	<div class="mt-3">
		<p>{{ listing.description }}</p>
	</div>
	<div class="mt-3">
		<h3>${{ listing.current_price|floatformat:2 }}</h3>
	</div>
	<div class="mt-3">
		<form action="{% url 'place-bid' listing.id %}" method="post">
			{% csrf_token %}
			<div class="form-group">
				<label class="form-label" for="bid">{{ count_bids }}(s) is so far. Your bid is the current bid.</label>
				<input class="form-control" type="number" step="0.01" name="bid" placeholder="Bid"> 
			</div>
			<input class="btn btn-primary mt-3" type="submit" value="Place Bid">
		</form>
	</div>
	<div class="mt-3">
		<h4>Details</h4>
		<ul>
			<li>Listed by: <a class="owner-link" href="#">{{ listing.owner.username }}</a></li>
			<li>Category:
				{% if listing.category %}
					{{ listing.category }}
				{% else %}
					No Category Listed
				{% endif %}
			</li>
		</ul>
	</div>
</div>
{% endblock %}
